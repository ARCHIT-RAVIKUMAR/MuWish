* { margin: 0; padding: 0; box-sizing: border-box; }
body { height: 100vh; width: 100vw; overflow: hidden; background-color: #090a0f; font-family: 'Montserrat', sans-serif; }

/* --- Background & Snow --- */
.container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, #1b2735 0%, #090a0f 100%); display: flex; justify-content: center; align-items: center; z-index: 1; }
.snow-container { position: absolute; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
.snow, .snow:after, .snow:before { content: ""; position: absolute; top: -650px; left: 0; right: 0; bottom: 0; background-image: radial-gradient(4px 4px at 100px 50px, #fff, transparent), radial-gradient(6px 6px at 200px 150px, #fff, transparent), radial-gradient(3px 3px at 300px 250px, #fff, transparent); background-size: 650px 650px; animation: snowAnim 15s linear infinite; opacity: 0.8; }
.snow:after { margin-left: -250px; opacity: 0.5; animation-duration: 20s; background-size: 450px 450px; }
.snow:before { margin-left: -350px; opacity: 0.3; animation-duration: 30s; background-size: 350px 350px; }
@keyframes snowAnim { from { transform: translateY(0); } to { transform: translateY(650px); } }

/* --- Tree & Ornaments --- */
.tree-scene { position: absolute; bottom: 10%; display: flex; flex-direction: column; align-items: center; transform: scale(1.5); z-index: 2; }
.star { font-size: 2.5rem; color: #ffd700; text-shadow: 0 0 10px #ffd700, 0 0 20px #ff8c00; animation: glow 1.5s infinite alternate; z-index: 10; margin-bottom: -18px; position: relative; }
.tree-stack { display: flex; flex-direction: column; align-items: center; }
.tree-layer { width: 0; height: 0; border-style: solid; border-color: transparent transparent #0f5e2f transparent; position: relative; filter: drop-shadow(0 4px 4px rgba(0,0,0,0.3)); }
.tree-layer::after { content: ''; position: absolute; width: 0; height: 0; border-style: solid; border-color: transparent transparent rgba(255,255,255,0.6) transparent; transform: translateX(-50%); left: 50%; }

/* Layer Sizes */
.top-layer { border-width: 0 40px 50px 40px; border-bottom-color: #146B3A; z-index: 3; }
.top-layer::after { top: 50px; border-width: 0 40px 15px 40px; }
.middle-layer { border-width: 0 60px 70px 60px; border-bottom-color: #0f5e2f; z-index: 2; margin-top: -25px; }
.middle-layer::after { top: 70px; border-width: 0 60px 15px 60px; }
.bottom-layer { border-width: 0 80px 90px 80px; border-bottom-color: #0a4020; z-index: 1; margin-top: -35px; }
.bottom-layer::after { top: 90px; border-width: 0 80px 15px 80px; }

/* Twinkling Ornaments */
.light { width: 6px; height: 6px; border-radius: 50%; position: absolute; animation: twinkle 1.5s infinite alternate; z-index: 5; }
.red { background: #ff0000; box-shadow: 0 0 5px #ff0000; animation-delay: 0.2s; }
.gold { background: #ffd700; box-shadow: 0 0 5px #ffd700; animation-delay: 0.5s; }
.blue { background: #00ffff; box-shadow: 0 0 5px #00ffff; animation-delay: 0.8s; }

/* Ornament Positions */
.top-layer .pos-1 { top: 30px; left: -10px; } .top-layer .pos-2 { top: 40px; left: 15px; }
.middle-layer .pos-1 { top: 35px; left: -20px; } .middle-layer .pos-2 { top: 50px; left: 0px; } .middle-layer .pos-3 { top: 45px; left: 25px; }
.bottom-layer .pos-1 { top: 40px; left: -30px; } .bottom-layer .pos-2 { top: 60px; left: -10px; } .bottom-layer .pos-3 { top: 50px; left: 20px; } .bottom-layer .pos-4 { top: 70px; left: 40px; }
@keyframes twinkle { from { opacity: 0.4; transform: scale(0.8); } to { opacity: 1; transform: scale(1.2); } }

.trunk { width: 26px; height: 40px; background: #3E2723; margin-top: -5px; z-index: 0; border-radius: 2px; }
.snow-ground { position: absolute; bottom: -50px; width: 800px; height: 120px; background: radial-gradient(circle, #fff 20%, #ddeeff 100%); border-radius: 50%; box-shadow: 0 0 30px rgba(255,255,255,0.2); z-index: -1; }
@keyframes glow { from { text-shadow: 0 0 10px #ffd700, 0 0 20px #ff8c00; transform: scale(1); } to { text-shadow: 0 0 20px #ffd700, 0 0 40px #ff4500; transform: scale(1.1); } }

/* --- Message Box (FIXED) --- */
#message-box { 
    position: absolute; 
    top: 40%; /* Moved up */ 
    left: 50%; 
    transform: translate(-50%, -50%); 
    text-align: center; color: #fff; z-index: 5; 
    width: 90%; max-width: 600px; padding: 40px; pointer-events: none;
    background: radial-gradient(circle, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0) 80%); /* Readable BG */
}
#greeting { font-family: 'Great Vibes', cursive; font-size: 5rem; background: linear-gradient(to bottom, #BF953F, #FCF6BA, #B38728, #FBF5B7, #AA771C); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 2px 0px rgba(0,0,0,0.5)); margin-bottom: 10px; line-height: 1.2; }
#sub-greeting { font-size: 1.5rem; margin-top: 10px; font-weight: 700; color: #ffffff; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
#from-badge { font-family: 'Montserrat', sans-serif; font-size: 1rem; font-weight: 700; letter-spacing: 2px; background: rgba(0, 0, 0, 0.5); border: 1px solid #ffd700; color: #ffd700; padding: 5px 15px; border-radius: 20px; display: inline-block; margin-bottom: 15px; box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }
.special-wish { animation: heartbeat 2s infinite ease-in-out; }
@keyframes heartbeat { 0% { transform: scale(1); filter: drop-shadow(0 2px 0px rgba(0,0,0,0.5)); } 50% { transform: scale(1.05); filter: drop-shadow(0 0 15px #ffd700); } 100% { transform: scale(1); filter: drop-shadow(0 2px 0px rgba(0,0,0,0.5)); } }

/* --- Canvas & Hand Guide --- */
canvas { position: absolute; top: 0; left: 0; z-index: 10; touch-action: none; cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2v20M2 12h20M4.93 4.93l14.14 14.14M4.93 19.07L19.07 4.93"/></svg>') 16 16, auto; }
#hand-guide { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 4rem; color: rgba(255, 255, 255, 0.8); text-shadow: 0 2px 10px rgba(0,0,0,0.5); z-index: 20; pointer-events: none; animation: wipe-hint 2s infinite ease-in-out; }
@keyframes wipe-hint { 0% { transform: translate(-50%, -50%) rotate(-20deg) translateX(-50px); opacity: 0; } 20% { opacity: 1; } 50% { transform: translate(-50%, -50%) rotate(20deg) translateX(50px); } 80% { opacity: 1; } 100% { transform: translate(-50%, -50%) rotate(-20deg) translateX(-50px); opacity: 0; } }

/* --- Controls --- */
.controls { position: absolute; bottom: 20px; right: 20px; z-index: 30; display: flex; gap: 10px; flex-wrap: wrap; justify-content: flex-end;}
button { background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 10px 20px; border-radius: 30px; cursor: pointer; backdrop-filter: blur(5px); transition: 0.2s; font-family: 'Montserrat', sans-serif; font-size: 0.9rem; }
button:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-2px); }
@media (max-width: 768px) { .tree-scene { transform: scale(1.2); bottom: 20%; } #greeting { font-size: 3rem; } }
